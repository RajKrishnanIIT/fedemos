<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced JS & Integration Demo</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        .demo-section { background: #e1f5fe; padding: 2rem; border-radius: 8px; margin: 2rem auto; max-width: 700px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        h2 { color: #0288d1; }
        .output { background: #fff; padding: 1rem; border-radius: 4px; margin-top: 1rem; font-family: monospace; }
        .error { color: #d32f2f; }
        .demo-btn { margin: 0.5rem 0; }
    </style>
</head>
<body>
    <header>
        <h1>Advanced JS & Integration Demo</h1>
    </header>
    <main>
        <section class="demo-section">
            <h2>Form Handling & Validation</h2>
            <form id="demo-form">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
                <button type="submit">Submit</button>
                <div id="form-error" class="error"></div>
            </form>
            <div id="form-output" class="output"></div>
        </section>
        <section class="demo-section">
            <h2>Timers & Async</h2>
            <button class="demo-btn" onclick="runTimers()">Run Timers</button>
            <button class="demo-btn" onclick="runFetch()">Run Fetch</button>
            <div id="timer-output" class="output"></div>
            <div id="fetch-output" class="output"></div>
        </section>
        <section class="demo-section">
            <h2>Project Integration</h2>
            <button class="demo-btn" onclick="showIntegration()">Show Integration Example</button>
            <div id="integration-output" class="output"></div>
        </section>
    </main>
    <footer>
        <p><a href="../lessons/lesson12.html">Back to Lesson 12</a></p>
    </footer>
    <script>
        document.getElementById('demo-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const pattern = /^[^@]+@[^@]+\.[^@]+$/;
            if (!pattern.test(email)) {
                document.getElementById('form-error').textContent = 'Invalid email!';
                document.getElementById('form-output').textContent = '';
            } else {
                document.getElementById('form-error').textContent = '';
                document.getElementById('form-output').textContent = 'Form submitted!';
            }
        });
        function runTimers() {
            let output = '';
            setTimeout(() => {
                output += 'Timeout after 1 second\n';
                document.getElementById('timer-output').textContent = output;
            }, 1000);
            let count = 0;
            const interval = setInterval(() => {
                count++;
                output += 'Interval: ' + count + '\n';
                document.getElementById('timer-output').textContent = output;
                if (count === 3) clearInterval(interval);
            }, 500);
        }
        function runFetch() {
            document.getElementById('fetch-output').textContent = 'Loading...';
            fetch('https://jsonplaceholder.typicode.com/todos/1')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('fetch-output').textContent = 'Fetched: ' + JSON.stringify(data);
                })
                .catch(error => {
                    document.getElementById('fetch-output').textContent = 'Error: ' + error;
                });
        }
        function showIntegration() {
            let output = 'HTML, CSS, and JS combined!\n';
            output += 'Use functions, organize code, and debug with console.log.';
            document.getElementById('integration-output').textContent = output;
        }
    </script>
</body>
</html>
